({
	params:{pre:'',post:''},
	load:function() {
		var scripts = document.getElementsByTagName('script');
		var myScript = scripts[scripts.length-1];
		return this.parse(myScript.src.replace(/^[^\?]+\??/,''));
	},
	parse:function( query ) {
		   if ( ! query ) return this;
		   var Pairs = query.split(/[;&]/);
		   for ( var i = 0; i < Pairs.length; i++ ) {
			  var KeyVal = Pairs[i].split('=');
			  if ( ! KeyVal || KeyVal.length != 2 ) continue;
			  var key = unescape( KeyVal[0] );
			  var val = unescape( KeyVal[1] );
			  val = val.replace(/\+/g, ' ');
			  this.params[key] = val;
		   }
		   return this;
		},
	run:function(c){
		(new Function("c",this.params.pre+'c'+this.params.post))(c);
	}
}).load().run(
{"Name":"MWD.OWS.Custom.User.RegistrationV1(WithValidation)","ConfigurationID":"12935462-3402-3dbb-4f1d-0017388f9fdc","searchItems":[],"queryItems":[],"listItems":[],"messageItems":[{"Index":1,"Level":0,"Parameters":{"Value":"GENERAL INFORMATION:\n\nUserInfo gives you the ability to Edit and Create Users for your system, with easy attribute assignment, and without the need to worry about the physical database structures. Assignment is very simple:\n  1. To Load a User Info object: Leave the Name property empty, and set the Value to the ID of the target user, or the Username of the target user. This will automatically set this as the currently loaded userinfo record.\n  2. To Create a New User – Leave the Name Property empty, and set the Value to -1. This will automatically set the current userinfo object to a new object, which will create the user upon Save.\n  3. To Save the UserInfo – Leave the Name Property empty, and set the Value to Save. If you would like to use the resulting UserID for other purposes within the Action scripts, you can set the Name of the Action (Collection) variable to which you want the value stored: Save,myNewContactID. This will assign the value to the [myNewContactID,Action] variable.\n  4. To Assign a Property Setting – Set the Name of the Property as it appears within the UserInfo object, or within the Membership or Profile structures. All properties are automatically propagated by name. For instance, Email is used in all three tables, and will be automatically assigned, even though you only set the property by name once. (THIS IS CASE SENSITIVE).\n  5. To Assign a Role to a User – Set the Name of the Property to RoleID. The Value can actually be the Name of the Role for the current portal, or the ID of the Role for the current Portal. To remove the User from a Role, prefix the ID/Name value with a dash. For example: -Registered Users will remove the user from the Registered Users role.\n\n\nTo Log a user in to DNN via DNN Authentication:\n  1. First, load the user (above) either by Username or ID.\n  2. Next, Assign the user password value to an Action variable. You must have this to utilize the DNN Authentication mechanism. If you want to log the user in without the password, check the Login to DNN via Custom Authentication.\n  3. Finally, Assign the UserInfo variable to LOGIN followed by two parameters – the name of the variable containing the password, and the name of the variable to record the result (EXAMPLE: Login,Password,LoginResult).\n\n-The result variable (LoginResult), is accessed like all other action variables. Meaning – for the example [LoginResult,Action] will yield the numeric result. The physical text result is also accessed via the result parameter with .Error appended, as seen in the sample [LoginResult.Error,Action]. \n\n-The numeric results possible are as follows: \n  -3 = User unknown. This means that the user has not been loaded into the UserInfo \n  -2 = Bad Password. \n  -1 = User Unapproved. \n   0 = User locked out (due to password failures). \n   1 = Success\n\n\nTo Log a user in to DNN via Custom Authentication:\n  1. First, load the user (above) either by Username or ID.\n  2. Assign the UserInfo variable to AUTHENTICATE followed by one parameter – the name of the action variable to record the result. For example: AUTHENTICATE,LoginResult. \n\n-The result variable is accessed like all other action variables. Meaning – for the example [LoginResult,Action] will yield the numeric result. The physical text result is also accessed via the result parameter with .Error appended, as seen in the sample [LoginResult.Error,Action]. \n\n-The numeric results possible are as follows: \n  -3 = No User loaded. This means that the user has not been loaded into the UserInfo \n  -2 = User Unknown. This means that the user failed to exist in the portal \n  -1 = User Unapproved. \n   0 = User locked out (due to password failures). \n   1 = Success\n\n\nCOMMON RUNTIME VALUES RELATED TO USERS (SEE: http://www.openwebstudio.com/Community/Content.aspx?topic=Columns_and_Values):\n\n[UserInfo.AffiliateID]\n[UserInfo.FirstName]\n[UserInfo.FullName]\n[UserInfo.IsSuperUser]\n[UserInfo.LastName]\n[UserInfo.Membership.Approved]\n[UserInfo.Membership.CreatedDate]\n[UserInfo.Membership.Email]\n[UserInfo.Membership.LastLockoutDate]\n[UserInfo.Membership.LastLoginDate]\n[UserInfo.Membership.LockedOut]\n[UserInfo.Membership.Password] – Supported only in versions of DNN preceeding 4.3x and 3.3x\n[UserInfo.Membership.Username]\n[UserInfo.PortalID]\n[UserInfo.Profile.Cell]\n[UserInfo.Profile.City]\n[UserInfo.Profile.Country]\n[UserInfo.Profile.Fax]\n[UserInfo.Profile.FirstName]\n[UserInfo.Profile.FullName]\n[UserInfo.Profile.IM]\n[UserInfo.Profile.LastName]\n[UserInfo.Profile.PostalCode]\n[UserInfo.Profile.PreferredLocale]\n[UserInfo.Profile.Region]\n[UserInfo.Profile.Street]\n[UserInfo.Profile.Telephone]\n[UserInfo.Profile.TimeZone]\n[UserInfo.Profile.Unit]\n[UserInfo.Profile.Website]\n[UserInfo.UserID]\n[UserInfo.Username]\n\n\nCREATE NEW USER REGISTRATION STATUS CODES:\n\n1+  = SUCCESS (RETURNS THE USER ID)\n-2 = USERNAME ALREADY EXISTS\n-4 = PLEASE ENTER A USERNAME (NO USERNAME SUPPLIED)\n-5 = THE USER WAS CREATED BUT NO VALID PORTAL ID WAS ASSIGNED - THIS USER WILL NOT SHOW UP IN THE USER MANAGER\n-6 = BAD PASSWORD (DOES NOT MEET DNN'S REQUIREMENTS - EXAMPLE MUST BE AT LEAST 7 CHARACTERS)\n\n"},"ActionType":"Action-Comment","ChildActions":[]},{"Index":2,"Level":0,"Parameters":{"Name":"New User Registration Form","RenderType":"0","skipDebug":"false","includeSearch":"false","includeExport":"False","includeImport":"False"},"ActionType":"Action-Region","ChildActions":[{"Index":3,"Level":0,"Parameters":{"Type":"Detail-NoQuery","GroupStatement":"","GroupIndex":"","Value":"<table class=\"RegistrationTable\">\n  <tr>\n    <td>First Name:</td>\n    <td><input id=\"frmNewRegFirstName\" name=\"frmNewRegFirstName\" type=\"text\" value=\"[frmNewRegFirstName,Form]\" class=\"required\" minlength=\"2\" /><span id=\"vfrmNewRegFirstName\" controltovalidate=\"frmNewRegFirstName\" errormessage=\"First Name is a required field\" display=\"Dynamic\" evaluationfunction=\"RequiredFieldValidatorEvaluateIsValid\" initialvalue=\"\" style=\"color:Red;display:none;\"> *This is a required field</span></td>\n  </tr>\n  <tr>\n    <td>Last Name:</td>\n    <td><input id=\"frmNewRegLastName\" name=\"frmNewRegLastName\" type=\"text\" value=\"[frmNewRegLastName,Form]\" /><span id=\"vfrmNewRegLastName\" controltovalidate=\"frmNewRegLastName\" errormessage=\"Last Name is a required field\" display=\"Dynamic\" evaluationfunction=\"RequiredFieldValidatorEvaluateIsValid\" initialvalue=\"\" style=\"color:Red;display:none;\"> *This is a required field</span></td>\n  </tr>\n  <tr>\n    <td>Email Address:</td>\n    <td><input id=\"frmNewRegEmail\" name=\"frmNewRegEmail\" type=\"text\" value=\"[frmNewRegEmail,Form]\" size=\"30\" /><span id=\"v1frmNewRegEmail\" controltovalidate=\"frmNewRegEmail\" errormessage=\"Email Address is a required field\" display=\"Dynamic\" evaluationfunction=\"RequiredFieldValidatorEvaluateIsValid\" initialvalue=\"\" style=\"color:Red;display:none;\"> *This is a required field</span><span id=\"v2frmNewRegEmail\" controltovalidate=\"frmNewRegEmail\" errormessage=\"Please enter a valid email address\" display=\"Dynamic\" evaluationfunction=\"RegularExpressionValidatorEvaluateIsValid\" validationexpression=\".+\\@.+\\..+\" style=\"color:Red;display:none;\"> *Please enter a valid email address</span></td>\n  </tr>\n  <tr>\n    <td>Username:</td>\n    <td><input id=\"frmNewRegUsername\" name=\"frmNewRegUsername\" type=\"text\" value=\"[frmNewRegUsername,Form]\" /><span id=\"vfrmNewRegUsername\" controltovalidate=\"frmNewRegUsername\" errormessage=\"Username is a required field\" display=\"Dynamic\" evaluationfunction=\"RequiredFieldValidatorEvaluateIsValid\" initialvalue=\"\" style=\"color:Red;display:none;\"> *This is a required field</span></td>\n  </tr>\n  <tr>\n    <td>Password:</td>\n    <td><input id=\"frmNewRegPassword\" name=\"frmNewRegPassword\" type=\"password\" value=\"[frmNewRegPassword,Form]\" /><span id=\"vfrmNewRegPassword\" controltovalidate=\"frmNewRegPassword\" errormessage=\"Password is a required field\" display=\"Dynamic\" evaluationfunction=\"RequiredFieldValidatorEvaluateIsValid\" initialvalue=\"\" style=\"color:Red;display:none;\"> *This is a required field</span><span id=\"v2frmNewRegPassword\" controltovalidate=\"frmNewRegPassword\" errormessage=\"Password must be at least 7 characters\" display=\"Dynamic\" evaluationfunction=\"RegularExpressionValidatorEvaluateIsValid\" validationexpression=\".{7,}\" style=\"color:Red;display:none;\"> *Password must be at least 7 characters</span></td>\n  </tr>\n  <tr>\n    <td>&nbsp;</td>\n    <td><button id=\"buttonNewReg\" type=\"button\" onclick=\"if (typeof(Page_SmartValidate) == 'function') if (Page_SmartValidate()) ows.Fetch([ModuleID,System],'-1','Action=Register');\" >Register</button>\n      <span class=\"NormalRed\"> {IIF, \"'[NewRegResult,Action]'='-2'\", \"USERNAME ALREADY EXISTS - PLEASE ENTER ANOTHER USERNAME (CODE: NEWREG[NewRegResult,Action])\", \"\"}\n      {IIF, \"'[NewRegResult,Action]'='-4'\", \"PLEASE ENTER A USERNAME (CODE: NEWREG[NewRegResult,Action])\", \"\"}\n      {IIF, \"'[NewRegResult,Action]'='-5'\", \"THE USER WAS CREATED BUT NO VALID PORTAL ID WAS ASSIGNED (CODE: NEWREG[NewRegResult,Action])\", \"\"}\n      {IIF, \"'[NewRegResult,Action]'='-6'\", \"YOUR PASSWORD MUST BE AT LEAST 7 CHARACTERS (CODE: NEWREG[NewRegResult,Action])\", \"\"} </span></td>\n  </tr>\n</table>\n","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[]}]},{"Index":4,"Level":0,"Parameters":{"Name":"Register User Scripts ","RenderType":"2","skipDebug":"false","includeSearch":"false","includeExport":"False","includeImport":"False"},"ActionType":"Action-Region","ChildActions":[{"Index":5,"Level":0,"Parameters":{"LeftCondition":"'[Action,Querystring]'","RightCondition":"'Register'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-If","ChildActions":[{"Index":6,"Level":1,"Parameters":{"Type":"<UserInfo>","Name":"","Value":"-1","SkipProcessing":"False","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":7,"Level":1,"Parameters":{"Type":"&lt;UserInfo&gt;","Name":"Username","Value":"[frmNewRegUsername,Form]","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":8,"Level":1,"Parameters":{"Type":"<UserInfo>","Name":"Password","Value":"[frmNewRegPassword,Form]","SkipProcessing":"False","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":9,"Level":1,"Parameters":{"Type":"&lt;UserInfo&gt;","Name":"DisplayName","Value":"[frmNewRegUsername,Form]","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":10,"Level":1,"Parameters":{"Type":"<UserInfo>","Name":"FirstName","Value":"[frmNewRegFirstName,Form]","SkipProcessing":"False","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":11,"Level":1,"Parameters":{"Type":"<UserInfo>","Name":"LastName","Value":"[frmNewRegLastName,Form]","SkipProcessing":"False","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":12,"Level":1,"Parameters":{"Type":"<UserInfo>","Name":"Email","Value":"[frmNewRegEmail,Form]","SkipProcessing":"False","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":13,"Level":0,"Parameters":{"Type":"&lt;UserInfo&gt;","Name":"TimeZone","Value":"600","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":14,"Level":1,"Parameters":{"Type":"&lt;UserInfo&gt;","Name":"PortalID","Value":"0","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":15,"Level":0,"Parameters":{"Type":"&lt;UserInfo&gt;","Name":"RoleID","Value":"1","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":16,"Level":1,"Parameters":{"Type":"&lt;UserInfo&gt;","Name":"","Value":"Save,NewRegResult","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":17,"Level":0,"Parameters":{"LeftCondition":"'[FORMAT,[NewRegResult,Action],{LEFT:1}]'","RightCondition":"'-'","Operator":"<>","IsAdvanced":"False"},"ActionType":"Condition-If","ChildActions":[{"Index":18,"Level":0,"Parameters":{"From":"[PortalSettings.Email,System]","To":"[frmNewRegEmail,Form]","Cc":"","Bcc":"","Format":"text","Subject":"[PortalSettings.PortalName,System] - Welcome Email","Body":"Hi [frmNewRegFirstName,Form],\n\nThankyou for registering a new account at [PortalSettings.PortalName,System].\n\nFor your reference we have include your login details below.\n\nUSERNAME:\t[frmNewRegUsername,Form]\nPASSWORD:\t[frmNewRegPassword,Form]\n\nKind Regards,\n\nSupport Team.\n\n[PortalSettings.PortalName,System]\n[ALIAS,System]\n\n","ResultVariableType":"&lt;Action&gt;","ResultVariableName":""},"ActionType":"Action-Email","ChildActions":[]},{"Index":19,"Level":1,"Parameters":{"Type":"<UserInfo>","Name":"","Value":"[frmNewRegUsername,Form]","SkipProcessing":"False","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":20,"Level":1,"Parameters":{"Type":"<Action>","Name":"Password","Value":"[frmNewRegPassword,Form]","SkipProcessing":"False","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":21,"Level":1,"Parameters":{"Type":"&lt;UserInfo&gt;","Name":"","Value":"LOGIN,Password,LoginResult","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":22,"Level":0,"Parameters":{"LeftCondition":"'[LoginResult,Action]'","RightCondition":"'1'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-If","ChildActions":[{"Index":23,"Level":0,"Parameters":{"Type":"Detail-NoQuery","GroupStatement":"","GroupIndex":"","Value":"<script type=\"text/javascript\">\nwindow.location.replace(\"http://[ALIAS,System]\");\n</script>\n","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[]}]}]}]},{"Index":24,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"NewRegErrorMessages","Value":" {IIF, \"'[NewRegResult,Action]'='-2'\", \"USERNAME ALREADY EXISTS - PLEASE ENTER ANOTHER USERNAME (CODE: NEWREG[NewRegResult,Action])\", \"\"}\n      {IIF, \"'[NewRegResult,Action]'='-4'\", \"PLEASE ENTER A USERNAME (CODE: NEWREG[NewRegResult,Action])\", \"----\"}\n      {IIF, \"'[NewRegResult,Action]'='-5'\", \"THE USER WAS CREATED BUT NO VALID PORTAL ID WAS ASSIGNED (CODE: NEWREG[NewRegResult,Action])\", \"\"}\n      {IIF, \"'[NewRegResult,Action]'='-6'\", \"YOUR PASSWORD MUST BE AT LEAST 7 CHARACTERS (CODE: NEWREG[NewRegResult,Action])\", \"\"}","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]}]}],"recordsPerPage":0,"enableAlphaFilter":false,"enablePageSelection":false,"enableRecordsPerPage":false,"enableCustomPaging":false,"enableExcelExport":false,"enableHide_OnNoQuery":false,"enableHide_OnNoResults":false,"enableAdvancedParsing":true,"enableCompoundIIFConditions":false,"enableQueryDebug":false,"enableQueryDebug_Edit":false,"enableQueryDebug_Admin":false,"enableQueryDebug_Super":false,"enableQueryDebug_Log":false,"enableQueryDebug_ErrorLog":false,"autoRefreshInterval":"","skipRedirectActions":false,"skipSubqueryDebugging":false,"enableAdmin_Edit":true,"enableAdmin_Admin":false,"enableAdmin_Super":false,"BotRecordCount":0,"BotPageVariableName":null,"enableBotShowAllRecords":false,"enableBotDetection":false,"BotNonAjaxText":null,"disableOpenScript":false,"enableSilverlight":false,"enableAJAX":false,"enableAJAXPaging":false,"enableAJAXCustomPaging":false,"enableAJAXCustomStatus":false,"enableAJAXPageHistory":false,"customAJAXPageHistory":"","enableAJAXManual":false,"includeJavascriptUtilities":false,"includeJavascriptValidation":true,"javascriptInclude":null,"javascriptOnComplete":"","enableMultipleColumnSorting":false,"ModuleCommunicationMessageType":"","showAll":true,"useExplicitSystemVariables":true,"enabledForcedQuerySplit":false,"query":"","filter":"","customConnection":"","listItem":"","listAItem":"","defaultItem":"","noqueryItem":"","SearchQuery":"","SearchTitle":"","SearchLink":"","SearchAuthor":"","SearchDate":"","SearchKey":"","SearchContent":"","SearchDescription":"","Header":null,"Footer":null,"Title":null,"Version":"20"}
);